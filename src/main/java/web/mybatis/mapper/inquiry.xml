<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="inquiry">
    <select id="all" resultType="web.mybatis.vo.InquiryVO" parameterType="String">
        SELECT * FROM inquiry
        <where>
            <if test=" text != null">
                iq_title LIKE CONCAT('%', #{inquiryTitle}, '%')
            </if>
            AND u_code = "2"
        </where>
    </select>


    <select id="search" parameterType="string" resultType="web.mybatis.vo.InquiryVO">
        SELECT * FROM inquiry
        <where>
            <if test="inquiryTitle != null and inquiryTitle != ''">
                iq_title LIKE CONCAT('%', #{inquiryTitle}, '%')
            </if>
        </where>
        ORDER BY iq_time DESC
    </select>
    <select id="count" parameterType="string" resultType="int">
        SELECT COUNT(*) FROM inquiry
        <where>
            <if test="inquiryTitle != null and inquiryTitle != ''">
                iq_title LIKE CONCAT('%', #{inquiryTitle}, '%')
            </if>
        </where>
    </select>

    <insert id="add" parameterType="Map">
        INSERT INTO inquiry (u_code, iq_title, iq_content, iq_time)
        VALUES (#{u_code}, #{iq_title}, #{iq_content}, NOW());
    </insert>
</mapper>